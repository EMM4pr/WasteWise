<div class="card-white" <%# style="height: 100vh;" %>>
  <div id="welcome-header">
    Welcome, <%= current_user.username.capitalize if user_signed_in?%>
  </div>

  <div class="progress-box">
    <div class="text-box">
      You've disposed <%= current_user.disposal_records.count %> items.
      That is <%= ((current_user.disposal_records.count / 30.0) * 100).to_i %>% of your weekly goal.
    </div>
    <div class="progress-goal">
      <div class="progress-line" style="width: <%= (current_user.disposal_records.count / 30.0 * 100).to_i %>%;"></div>
    </div>
  </div>

  <h1>Your rewards</h1>
  <div class="rewards">
    <% if @disposal_records.count >= 10 %>
      <div class="reward">
        Eco Hero Badge
      </div>
    <%else%>
      <div class="empty-reward">
        Eco Hero Badge
      </div>
    <% end %>

    <% if @disposal_records.count >= 15 %>
      <div class="reward">
        Green Thumb Trophy
      </div>
    <%else%>
      <div class="empty-reward">
        Green Thumb Trophy
      </div>
    <% end %>

    <% if @disposal_records.count >= 25 %>
      <div class="reward">
        Trash Titan Certificate
      </div>
    <%else%>
      <div class="empty-reward">
        Trash Titan Certificate
      </div>
    <% end %>

    <% if @disposal_records.count >= 35 %>
      <div class="reward">
        Eco Warrior Medal
      </div>
    <%else%>
      <div class="empty-reward">
        Eco Warrior Medal
      </div>
    <% end %>

    <% if @disposal_records.count >= 45 %>
      <div class="reward">
        Waste Wizard Diploma
      </div>
    <%else%>
      <div class="empty-reward">
        Waste Wizard Diploma
      </div>
    <% end %>

    <% if @disposal_records.count >= 55 %>
      <div class="reward">
        Planet Protector Plaque
      </div>
    <%else%>
      <div class="empty-reward">
        Planet Protector Plaqu
      </div>
    <% end %>

    <% if @disposal_records.count >= 65 %>
      <div class="reward">
        Sustainability Star Trophy
      </div>
    <%else%>
      <div class="empty-reward">
        Sustainability Star Trophy
      </div>
    <% end %>
  </div>

  <h1>You disposed</h1>
  <div class="inner-card-white">
    <div class="dash-card">
      <a href="#" class="link chart-box" data-bs-toggle="modal" data-bs-target="#exampleModal">
        <%= pie_chart(@bin_types_count, colors: ["#8A584C", "#4A702F", "#FFD50B"], donut: true, class:"chart")%>
      </a>
    </div>
  </div>

  <h1>Grow Your Forest </h1>
  <div class="inner-card-white" data-controller="shuffle">
    <div class="grid-card" data-shuffle-target="grid">
      <% @disposal_records.count.times do%>
        <div class="card" data-shuffle-target="card">
          <%= image_tag "tree#{rand(1..3)}.png", class: "baum", alt: "tree" %>
        </div>
      <%end%>
      <% (50-@disposal_records.count).times do%>
        <div class="card" data-shuffle-target="card">
          <p></p>
        </div>
      <%end%>
    </div>
  </div>


  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Your recently disposed items </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <% @disposal_records[0..3].each do |disposal_record|%>
            <% if @bin_type_id.include?(disposal_record.waste_item.bin_type_id) %>
              <p>
                <div>
                <%= disposal_record.waste_item.name%>
                </div>
                <div>
                <%= disposal_record.waste_item.category.name%>
                </div>
                <div>
                <%= disposal_record.waste_item.bin_type.name%>
                </div>
              </p>
            <%else%>
              sorry
            <%end%>
          <%end%>
        </div>

        <div class="modal-footer">
          <%# <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> %>
          <%= link_to "See all", waste_items_path, class:"link button" %>
        </div>
      </div>
    </div>
  </div>
